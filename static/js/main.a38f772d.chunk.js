(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{36:function(e,t,i){},37:function(e,t,i){},63:function(e,t,i){"use strict";i.r(t);var a,n,s,o=i(0),r=i.n(o),c=i(29),h=i.n(c),d=(i(36),i(37),i(30)),l=i(2),u=i(9),m=i(10),g=i(12),f=i(11),p=i(1),v=i.n(p),b=function(e){Object(g.a)(i,e);var t=Object(f.a)(i);function i(){return Object(u.a)(this,i),t.call(this,"Start")}return Object(m.a)(i,[{key:"preload",value:function(){this.load.html("nameform","assets/nameform.html"),this.load.bitmapFont("arcade","assets/arcade.png","assets/arcade.xml")}},{key:"create",value:function(){var e=this.add.bitmapText(40,50,"arcade","",20).setTint(16777215),t=JSON.parse(localStorage.getItem("snake"));t&&e.setText("Welcome "+t.name),t||e.setText("Please enter your name");var i=this.add.dom(300,200).createFromCache("nameform");t&&(i.getChildByName("nameField").setAttribute("hidden",!0),i.getChildByName("playButton").removeAttribute("disabled")),i.addListener("click"),i.addListener("input"),i.on("input",(function(e){e.target.value.length>1&&this.getChildByName("playButton").removeAttribute("disabled")})),i.on("click",(function(t){if(i.getChildByName("nameField").getAttribute("hidden"))return this.setVisible(!1),e.setText(""),void this.scene.scene.manager.start("Game");if("playButton"===t.target.name){var a=this.getChildByName("nameField");if(""!==a.value){this.removeListener("click"),this.setVisible(!1);var n={name:a.value,level:null,id:Date.now()};localStorage.setItem("snake",JSON.stringify(n)),e.setText(""),this.scene.scene.manager.start("Game")}}}))}}]),i}(v.a.Scene),y=function(e){Object(g.a)(i,e);var t=Object(f.a)(i);function i(){return Object(u.a)(this,i),t.call(this,"Game")}return Object(m.a)(i,[{key:"gameOver",value:function(){this.scene.manager.stop("Game"),this.scene.manager.start("FinishScene",{snake:a,food:n})}},{key:"preload",value:function(){var e=this;this.load.image("food","assets/coin.png"),this.load.image("body","assets/player.png"),this.load.bitmapFont("arcade","assets/arcade.png","assets/arcade.xml"),setTimeout((function(){return e.gameOver()}),6e4)}},{key:"create",value:function(){var e;e=this.add.bitmapText(6,6,"arcade","0",20).setTint(16777215);var t=new v.a.Class({Extends:v.a.GameObjects.Image,initialize:function(e,t,i){v.a.GameObjects.Image.call(this,e),this.setTexture("food"),this.setPosition(16*t,16*i).setOrigin(0,0),this.total=0,e.children.add(this)},eat:function(){if(this.total++,e.setText(this.total),this.total>3){var t=this;return setTimeout((function(){return t.scene.gameOver()}),0)}}}),i=new v.a.Class({initialize:function(e,t,i){this.headPosition=new v.a.Geom.Point(t,i),this.body=e.add.group(),this.head=this.body.create(16*t,16*i,"body"),this.head.setOrigin(0),this.alive=!0,this.speed=300,this.moveTime=0,this.tail=new v.a.Geom.Point(t,i),this.grow(),this.grow(),this.heading=3,this.direction=3},hitBody:function(){return v.a.Actions.GetFirst(this.body.children.entries,{x:this.head.x,y:this.head.y},1)},update:function(e){if(e>=this.moveTime)return this.move(e)},faceLeft:function(){0!==this.direction&&1!==this.direction||(this.heading=2)},faceRight:function(){0!==this.direction&&1!==this.direction||(this.heading=3)},faceUp:function(){2!==this.direction&&3!==this.direction||(this.heading=0)},faceDown:function(){2!==this.direction&&3!==this.direction||(this.heading=1)},move:function(e){if(this.hitBody())return this.alive=!1,!1;switch(this.heading){case 2:this.headPosition.x=v.a.Math.Wrap(this.headPosition.x-1,0,40);break;case 3:this.headPosition.x=v.a.Math.Wrap(this.headPosition.x+1,0,40);break;case 0:this.headPosition.y=v.a.Math.Wrap(this.headPosition.y-1,0,30);break;case 1:this.headPosition.y=v.a.Math.Wrap(this.headPosition.y+1,0,30);break;default:console.log("Error")}return this.direction=this.heading,v.a.Actions.ShiftPosition(this.body.getChildren(),16*this.headPosition.x,16*this.headPosition.y,1,this.tail),this.moveTime=e+this.speed,!0},grow:function(){this.body.create(this.tail.x,this.tail.y,"body").setOrigin(0)},collideWithFood:function(e){return this.head.x===e.x&&this.head.y===e.y&&(this.grow(),e.eat(),this.speed>20&&e.total%5===0&&(this.speed-=5),!0)},updateGrid:function(e){return this.body.children.each((function(t){var i=t.x/16,a=t.y/16;e[a][i]=!1})),e}});a=new i(this,8,8),n=new t(this,10,4),s=this.input.keyboard.createCursorKeys()}},{key:"update",value:function(e,t){if(!a.alive)return this.scene.manager.stop("Game"),void this.scene.manager.start("FinishScene",{snake:a,food:n});s.left.isDown?a.faceLeft():s.right.isDown?a.faceRight():s.up.isDown?a.faceUp():s.down.isDown&&a.faceDown(),a.update(e)&&a.collideWithFood(n)&&this.repositionFood()}},{key:"repositionFood",value:function(){for(var e=[],t=0;t<30;t++){e[t]=[];for(var i=0;i<40;i++)e[t][i]=!0}a.updateGrid(e);for(var s=[],o=0;o<30;o++)for(var r=0;r<40;r++)!0===e[o][r]&&s.push({x:r,y:o});if(s.length>0){var c=v.a.Math.RND.pick(s);return n.setPosition(16*c.x,16*c.y),!0}return!1}}]),i}(v.a.Scene),O=i(15),x=i.n(O),k=function(e){Object(g.a)(i,e);var t=Object(f.a)(i);function i(){return Object(u.a)(this,i),t.call(this,"FinishScene")}return Object(m.a)(i,[{key:"init",value:function(e){this.snake=e.snake,this.food=e.food}},{key:"preload",value:function(){this.load.bitmapFont("arcade","assets/arcade.png","assets/arcade.xml")}},{key:"create",value:function(){var e=this;console.log(this.snake,this.food);var t=this.snake.alive&&this.food.total>0?"Well Done":"Game Over";this.add.bitmapText(160,50,"arcade",t).setTint(16777215);var i=this.add.bitmapText(480,200,"arcade","highscore",20).setOrigin(.5,1),a=this.snake.alive&&this.food.total>0?"NExt level":"Start Again",n=this.add.bitmapText(160,200,"arcade",a,20).setOrigin(.5,1),s=this.add.bitmapText(300,300,"arcade","save result",20).setOrigin(.5,1);this.add.zone(s.x-s.width*s.originX-16,s.y-s.height*s.originY-16,s.width+32,s.height+32).setOrigin(0,0).setInteractive().once("pointerup",(function(){var t=JSON.parse(localStorage.getItem("snake"));t.level=e.food.total,delete t.id,x.a.post("http://localhost:3004/add-users",t).then((function(t){e.scene.manager.stop("FinishScene"),e.scene.manager.start("OverScene")})).catch((function(e){return console.log(e.message)}))})),this.add.zone(n.x-n.width*n.originX-16,n.y-n.height*n.originY-16,n.width+32,n.height+32).setOrigin(0,0).setInteractive().once("pointerup",(function(){e.scene.manager.stop("FinishScene"),e.scene.manager.start("Game")})),this.add.zone(i.x-i.width*i.originX-16,i.y-i.height*i.originY-16,i.width+32,i.height+32).setOrigin(0,0).setInteractive().once("pointerup",(function(){e.scene.manager.stop("FinishScene"),e.scene.manager.start("OverScene")}))}}]),i}(v.a.Scene),j=[{id:12121,name:"Bob",level:2},{id:13345,name:"Pit",level:3}],w=function(e){Object(g.a)(i,e);var t=Object(f.a)(i);function i(){var e;return Object(u.a)(this,i),(e=t.call(this,"OverScene")).scores=[],e}return Object(m.a)(i,[{key:"preload",value:function(){this.load.bitmapFont("arcade","assets/arcade.png","assets/arcade.xml")}},{key:"create",value:function(){var e=this;x.a.get("http://localhost:3004/get-users",{}).then((function(t){console.log(t.data),j=t.data,e.add.bitmapText(50,50,"arcade","RANK SCORE NAME").setTint(16777215);for(var i=1;i<6;i++)j[i-1]?e.add.bitmapText(50,100+50*i,"arcade"," ".concat(i,"    ").concat(j[i-1].level,"    ").concat(j[i-1].name)).setTint(16777215):e.add.bitmapText(50,100+50*i,"arcade"," ".concat(i,"    0    ---")).setTint(16777215)})).catch((function(t){console.log(t.message),e.add.bitmapText(50,50,"arcade","sever no connected ").setTint(16777215)}));var t=this.add.bitmapText(280,450,"arcade","start again",20).setOrigin(.5,1);this.add.tween({targets:[t],ease:function(e){return e<.5?0:1},duration:450,yoyo:!0,repeat:-1,alpha:0}),this.add.zone(t.x-t.width*t.originX-16,t.y-t.height*t.originY-16,t.width+32,t.height+32).setOrigin(0,0).setInteractive().once("pointerup",(function(){e.scene.manager.stop("OverScene"),e.scene.manager.start("Game")}))}}]),i}(v.a.Scene),T=i(7),S=function(e){Object(g.a)(i,e);var t=Object(f.a)(i);function i(){return Object(u.a)(this,i),t.apply(this,arguments)}return Object(m.a)(i,[{key:"componentDidMount",value:function(){var e={type:v.a.WEBGL,width:640,height:480,backgroundColor:"#000",dom:{createContainer:!0},parent:"phaser-example",scene:[b,k,y,w]};new v.a.Game(e)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return Object(T.jsx)("div",{id:"phaser-game"})}}]),i}(r.a.Component);var F=function(){return Object(T.jsx)(d.a,{children:Object(T.jsxs)(l.c,{children:[Object(T.jsx)(l.a,{path:"/",exact:!0,component:S}),Object(T.jsx)(l.a,{path:"/score",component:function(){return Object(T.jsx)("div",{children:"Score"})}})]})})};h.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(F,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.a38f772d.chunk.js.map